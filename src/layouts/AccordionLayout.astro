---
import { Icon } from "astro-icon/components";

interface Props {
  title: string;
  icon: string;
  defaultOpen?: boolean;
}

const { title, icon, defaultOpen = false } = Astro.props;
---

<!-- Analytics is already injected at root level in index.astro -->
<div class="collapse collapse-arrow ease-in-out duration-700 animate-on-scroll accordion-section content-auto">
    <input 
      aria-label={`Toggle ${title} section`} 
      type="checkbox"
      class="accordion-checkbox"
      checked={defaultOpen}
    />
    <div class="collapse-title font-extrabold tracking-tight md:text-2xl">
      <div class="flex items-center">
        <Icon name={icon} class="accordion-icon w-8 h-8 mr-4" aria-hidden="true" />
        <h2>{title}</h2>
      </div>
    </div>
    <div class="collapse-content">
      <slot/>
  </div>
</div>

<style>
  .accordion-icon {
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), 
                color 0.3s ease;
  }
  
  .accordion-checkbox:checked ~ .collapse-title .accordion-icon {
    transform: rotate(360deg) scale(1.1);
    color: oklch(var(--p));
  }
  
  .accordion-section:hover .accordion-icon {
    transform: rotate(15deg);
    color: oklch(var(--p) / 0.8);
  }
  
  .accordion-checkbox:checked ~ .collapse-title:hover .accordion-icon {
    transform: rotate(375deg) scale(1.1);
  }
</style>